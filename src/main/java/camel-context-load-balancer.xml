<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:camel="http://camel.apache.org/schema/spring"
    xmlns:prop="http://camel.apache.org/schema/placeholder"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans                  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd                 http://camel.apache.org/schema/spring                  http://camel.apache.org/schema/spring/camel-spring.xsd">
    <bean class="it.marco.camel.load.balancer.MyLoadBalancer" id="myBalancer"/>
    <camelContext id="camelContext-6181de96-d9a3-4d14-817d-d295a4a6a151" xmlns="http://camel.apache.org/schema/spring">
        <errorHandler id="myErrorHandler" type="DefaultErrorHandler">
            <redeliveryPolicy maximumRedeliveries="5"/>
        </errorHandler>
        <route id="_route34">
            <from id="_from1" uri="direct:start"/>
            <loadBalance id="_loadBalance1">
                <roundRobin id="_roundRobin1"/>
                <to id="_to1" uri="direct:mock-x"/>
                <to id="_to2" uri="direct:mock-y"/>
                <to id="_to3" uri="direct:mock-z"/>
            </loadBalance>
        </route>
        <route id="_route35">
            <from id="_from2" uri="direct:mock-x"/>
            <log id="_log1" message="from direct:mock-x ----------> ${body}"/>
        </route>
        <route id="_route36">
            <from id="_from3" uri="direct:mock-y"/>
            <log id="_log2" message="from direct:mock-y ----------> ${body}"/>
        </route>
        <route id="_route37">
            <from id="_from4" uri="direct:mock-z"/>
            <log id="_log3" message="from direct:mock-z ----------> ${body}"/>
        </route>
        <route id="_route38">
            <from id="_from5" uri="direct:start-random"/>
            <loadBalance id="_loadBalance2">
                <random id="_random1"/>
                <to id="_to4" uri="direct:mock-random-x"/>
                <to id="_to5" uri="direct:mock-random-y"/>
                <to id="_to6" uri="direct:mock-random-z"/>
            </loadBalance>
        </route>
        <route errorHandlerRef="myErrorHandler" id="_route42">
            <from id="_from9" uri="direct:foo"/>
            <loadBalance id="_loadBalance3">
                <failover id="_failover1" maximumFailoverAttempts="5" roundRobin="true">
                    <exception>java.io.IOException</exception>
                    <exception>it.marco.camel.exception.MyOtherException</exception>
                </failover>
                <to id="_to7" uri="direct:a"/>
                <to id="_to8" uri="direct:b"/>
            </loadBalance>
        </route>
        <route id="_route43">
            <from id="_from10" uri="direct:start-sticky"/>
            <loadBalance id="_loadBalance4">
                <sticky id="_sticky1">
                    <correlationExpression>
                        <simple>header.username</simple>
                    </correlationExpression>
                </sticky>
                <to id="_to9" uri="direct:mock-sticky-x"/>
                <to id="_to10" uri="direct:mock-sticky-y"/>
                <to id="_to11" uri="direct:mock-sticky-z"/>
            </loadBalance>
        </route>
        <route id="_route55">
            <from id="_from22" uri="direct:start-weighted"/>
            <loadBalance id="_loadBalance8">
                <weighted distributionRatio="4:2:1"
                    distributionRatioDelimiter=":" id="_weighted1" roundRobin="true"/>
                <to id="_to21" uri="direct:start-weighted-x"/>
                <to id="_to22" uri="direct:start-weighted-y"/>
                <to id="_to23" uri="direct:start-weighted-z"/>
            </loadBalance>
        </route>
        <route id="_route39">
            <from id="_from6" uri="direct:mock-random-x"/>
            <log id="_log4" message="from direct:mock-random-x ----------> ${body}"/>
        </route>
        <route id="_route40">
            <from id="_from7" uri="direct:mock-random-y"/>
            <log id="_log5" message="from direct:mock-random-y ----------> ${body}"/>
        </route>
        <route id="_route41">
            <from id="_from8" uri="direct:mock-random-z"/>
            <log id="_log6" message="from direct:mock-random-z ----------> ${body}"/>
        </route>
        <route id="_route44">
            <from id="_from11" uri="direct:a"/>
            <log id="_log18" message="from direct:a ----------> it.marco.camel.exception.MyOtherException"/>
            <throwException
                exceptionType="it.marco.camel.exception.MyOtherException" id="_throwException4"/>
            <log id="_log7" message="from direct:a ----------> ${body}"/>
        </route>
        <route id="_route45">
            <from id="_from12" uri="direct:b"/>
            <log id="_log19" message="from direct:b ----------> it.marco.camel.exception.MyOtherException"/>
            <throwException
                exceptionType="it.marco.camel.exception.MyOtherException" id="_throwException5"/>
            <log id="_log8" message="from direct:b ----------> ${body}"/>
        </route>
        <route id="_route46">
            <from id="_from13" uri="direct:mock-sticky-x"/>
            <log id="_log9" message="from direct:mock-sticky-x ----------> ${body}"/>
        </route>
        <route id="_route47">
            <from id="_from14" uri="direct:mock-sticky-y"/>
            <log id="_log10" message="from direct:mock-sticky-y ----------> ${body}"/>
        </route>
        <route id="_route48">
            <from id="_from15" uri="direct:mock-sticky-z"/>
            <log id="_log11" message="from direct:mock-sticky-z ----------> ${body}"/>
        </route>
        <route errorHandlerRef="myErrorHandler" id="_route49">
            <from id="_from16" uri="direct:start-failover"/>
            <loadBalance id="_loadBalance5">
                <failover id="_failover2">
                    <exception>java.io.IOException</exception>
                </failover>
                <to id="_to12" uri="direct:failover-x"/>
                <to id="_to13" uri="direct:failover-y"/>
                <to id="_to14" uri="direct:failover-z"/>
            </loadBalance>
        </route>
        <route errorHandlerRef="myErrorHandler" id="_route53">
            <from id="_from20" uri="direct:start-failover-no-exception"/>
            <loadBalance id="_loadBalance6">
                <failover id="_failover3"/>
                <to id="_to15" uri="direct:failover-x"/>
                <to id="_to16" uri="direct:failover-y"/>
                <to id="_to17" uri="direct:failover-z"/>
            </loadBalance>
        </route>
        <route errorHandlerRef="myErrorHandler" id="_route54">
            <from id="_from21" uri="direct:start-failover-no-exception-roundrobin"/>
            <loadBalance id="_loadBalance7">
                <failover id="_failover4" maximumFailoverAttempts="5" roundRobin="true"/>
                <to id="_to18" uri="direct:failover-x"/>
                <to id="_to19" uri="direct:failover-y"/>
                <to id="_to20" uri="direct:failover-z"/>
            </loadBalance>
        </route>
        <route id="_route56">
            <from id="_from23" uri="direct:start-custom-load-balancer"/>
            <loadBalance id="_loadBalance9">
                <custom ref="myBalancer"/>
                <to id="_to24" uri="direct:custom-load-balancer-x"/>
                <to id="_to25" uri="direct:custom-load-balancer-y"/>
                <to id="_to26" uri="direct:custom-load-balancer-z"/>
            </loadBalance>
        </route>
        <route id="_route50">
            <from id="_from17" uri="direct:failover-x"/>
            <log id="_log15" message="from direct:failover-x ----------> java.io.IOException"/>
            <throwException exceptionType="java.io.IOException" id="_throwException1"/>
            <log id="_log12" message="from direct:failover-x ----------> ${body}"/>
        </route>
        <route id="_route51">
            <from id="_from18" uri="direct:failover-y"/>
            <log id="_log16" message="from direct:failover-y ----------> java.io.IOException"/>
            <throwException exceptionType="java.io.IOException" id="_throwException2"/>
            <log id="_log13" message="from direct:failover-y ----------> ${body}"/>
        </route>
        <route id="_route52">
            <from id="_from19" uri="direct:failover-z"/>
            <log id="_log17" message="from direct:failover-z ----------> java.io.IOException"/>
            <throwException exceptionType="java.io.IOException" id="_throwException3"/>
            <log id="_log14" message="from direct:failover-z ----------> ${body}"/>
        </route>
        <route id="_route57">
            <from id="_from24" uri="direct:start-weighted-x"/>
            <log id="_log20" message="from direct:start-weighted-x ----------> ${body}"/>
        </route>
        <route id="_route58">
            <from id="_from25" uri="direct:start-weighted-y"/>
            <log id="_log21" message="from direct:start-weighted-y ----------> ${body}"/>
        </route>
        <route id="_route59">
            <from id="_from26" uri="direct:start-weighted-z"/>
            <log id="_log22" message="from direct:start-weighted-z ----------> ${body}"/>
        </route>
        <route id="_route60">
            <from id="_from27" uri="direct:custom-load-balancer-x"/>
            <log id="_log23" message="from direct:custom-load-balancer-x ----------> ${body}"/>
        </route>
        <route id="_route61">
            <from id="_from28" uri="direct:custom-load-balancer-y"/>
            <log id="_log24" message="from direct:custom-load-balancer-y ----------> ${body}"/>
        </route>
        <route id="_route62">
            <from id="_from29" uri="direct:custom-load-balancer-z"/>
            <log id="_log25" message="from direct:custom-load-balancer-z ----------> ${body}"/>
        </route>
    </camelContext>
</beans>
